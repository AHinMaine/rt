@Initial = (
    sub {
        my $users = RT::Users->new(RT->SystemUser);
        $users->UnLimit;

        while (my $user = $users->Next) {
            my $settings = $user->Preferences('HomepageSettings')
                or next;
            next if exists $settings->{sidebar};

            $settings->{sidebar} = delete $settings->{summary};
            $user->SetPreferences('HomepageSettings', $settings);
        }
    },
    sub {
        my ($default_portlets) = RT->System->Attributes->Named('HomepageSettings');
        my $settings = $default_portlets->Content;
        return if exists $settings->{sidebar};

        $settings->{sidebar} = delete $settings->{summary};
        $default_portlets->SetContent($settings);
    },
);

@Templates = (
    {  Queue       => '0',
       Name        => 'Reminder',                           # loc
       Description => 'Default reminder template',          # loc
       Content     =>
'To: { $Target = $Ticket->RefersTo->First->TargetObj; ($Argument eq \'TicketOwner\' ? $Target : $Ticket)->OwnerObj->EmailAddress }
Subject: {$Ticket->Subject} is due {$Ticket->DueAsString}

This reminder is for ticket #{$Target->Id}.

{RT->Config->Get(\'WebURL\')}Ticket/Display.html?id={$Target->Id}
'
    },
);
